name: test

on:
  workflow_dispatch:
    inputs:
      environment:
        description: "enter the environment to deploy to"
        required: true
      version_identity:
        description: "Identity: enter image tag"
        required: false
jobs:
  build:
    name: Run Web App
    runs-on: ubuntu-latest
    steps:
      - name: Build Web App
        run: |
          echo "Build Web App"
          sleep 10s
      - uses: convictional/trigger-workflow-and-wait@v1.3.0
        with:
          owner: bondorigination
          repo: devops
          github_token: ${{ secrets.PAT }}
          workflow_file_name: test.yml
          wait_interval: 10
          inputs: '{"environment": "${{ github.event.inputs.environment }}", "version_identity": "${{ github.event.inputs.version_identity }}"}'
          propagate_failure: false
          trigger_workflow: true
          wait_workflow: true
