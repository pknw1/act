on:
  workflow_dispatch:
    inputs:
      environment:
        description: "enter the environment to deploy to"
        required: true
      version_identity:
        description: "Identity: enter image tag"
        required: false


jobs:
  identity:
    if: github.event.inputs.version_identity  != ''  
    runs-on: ubuntu-latest
    steps:
      - uses: convictional/trigger-workflow-and-wait@v1.3.0
        with:
          owner: bondorigination
          repo: devops
          github_token: ${{ secrets.PAT }}
          workflow_file_name: test.yml
          wait_interval: 10
          inputs: '{"environment": "dev", "version": "123"}'
          propagate_failure: false
          trigger_workflow: true
          wait_workflow: true